angular.module("ngSlider",[]).directive("sliderDir",["$window","$interval","$timeout",function(c,b,a){return function(s,m,w){if(s.$last==true){var d=m.parent().parent();var k=m.parent();var j=k.children("li");var v=j.length;var h="";for(var u=0;u<v;u++){h+="<li></li>"}d.append('<ul class="dots">'+h+"</ul>");var e=d.children().eq(1).children("li");e.eq(0).addClass("active");k.append(j.eq(0).clone());a(function(){j.eq(v-1).html(j[0].innerHTML)},100);j=k.children("li");v=j.length;var r,n;x();angular.element(c).bind("resize",function(){x()});function x(){r=d[0].clientWidth;n=r*2/3;if(s.hw){n=r*s.hw}d.css("height",n+"px");k.css({"width":r*v+"px","left":"0px"});j.css("width",r+"px")}var f=b(t,3000);function t(){g++;p(-1)}s.$on("$destroy",function(){b.cancel(f)});var o=0,l=0,g=0,q=false;d.bind("touchstart",function(y){b.cancel(f);var i=y.targetTouches||y.originalEvent.targetTouches;o=i[0].pageX});d.bind("touchmove",function(i){i.preventDefault()});d.bind("touchend",function(y){var i=y.changedTouches||y.originalEvent.changedTouches;l=i[0].pageX-o;if(l<-30){if(q){return}g++;p(-1)}else{if(l>30){if(q){return}g--;p(1)}}a(function(){f=b(t,3000)},300)});function p(i){q=true;if(g>=v){k.css("left","0px");g=1}if(g<0){k.css("left",-r*(v-1)+"px");g=v-2}var z=-r*g;var y=function(){var B=parseInt(k.css("left"));var A=(z-B)/8;A=A>0?Math.ceil(A):Math.floor(A);if((i<0&&B>z)||(i>0&&B<z)){k.css("left",B+A+"px");a(y,10)}else{q=false}};y();e.removeClass("active");e.eq(g>=(v-1)?0:g).addClass("active")}}}}]);
