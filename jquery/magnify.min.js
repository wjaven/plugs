$.extend($.fn,{magnifying:function(){var c=$(this),$imgCon=c.find('.magnifyshow'),$img=$imgCon.find('.magnifyimg'),$drag=c.find('.magnifydrag'),$show=c.find('.magnifybig'),$bigImg=$show.find('.magnifybigimg'),$imgul=c.find(".magnifylist ul"),$imgList=c.find('.magnifylist li'),$prevbtn=c.find(".prevbtn"),$nextbtn=c.find(".nextbtn"),showlen=7;var d=$show.width()/$drag.width();$imgList.eq(0).addClass("active");$img.attr('src',$imgList.eq(0).attr('data-img'));$bigImg.attr('src',$imgList.eq(0).attr('data-bigimg'));var w=$imgul.children().eq(0).width()+9;var f=$imgul.children().length;$imgul.css("width",w*f);var g=w*f-c.find(".magnifylist").width();var h=f-5;if(h>0){$nextbtn.addClass("active");var i;$nextbtn.on("mousedown",function(){left();function left(){var a=parseInt($imgul.css("left"));var b=a-10;if(b>-g){$imgul.css("left",b+'px');i=setTimeout(left,10);$prevbtn.addClass("active")}else{$imgul.css("left",-g+'px');$nextbtn.removeClass("active")}}});$nextbtn.on("mouseup",function(){clearTimeout(i)});$prevbtn.on("mousedown",function(){right();function right(){var a=parseInt($imgul.css("left"));var b=a+10;if(b<0){$imgul.css("left",b+'px');i=setTimeout(right,10);$nextbtn.addClass("active")}else{$imgul.css("left",0+'px');$prevbtn.removeClass("active")}}});$prevbtn.on("mouseup",function(){clearTimeout(i)})}$imgCon.mousemove(function(e){$drag.css('display','block');$show.css('display','block');var a=e.pageX-$(this).offset().left-$drag.width()/2,iY=e.pageY-$(this).offset().top-$drag.height()/2,MaxX=$imgCon.width()-$drag.width(),MaxY=$imgCon.height()-$drag.height();a=a>0?a:0;a=a<MaxX?a:MaxX;iY=iY>0?iY:0;iY=iY<MaxY?iY:MaxY;$drag.css({left:a+'px',top:iY+'px'});$bigImg.css({marginLeft:-d*a+'px',marginTop:-d*iY+'px'})});$imgCon.mouseout(function(){$drag.css('display','none');$show.css('display','none')});$imgList.click(function(){var a=$(this).attr('data-img');var b=$(this).attr('data-bigimg');$img.attr('src',a);$bigImg.attr('src',b);$(this).addClass('active').siblings().removeClass('active')});$imgList.mouseover(function(){var a=$(this).attr('data-img');var b=$(this).attr('data-bigimg');$img.attr('src',a);$bigImg.attr('src',b);$(this).addClass('active').siblings().removeClass('active')})}});
