$.extend($.fn,{page:function(d){var e=this,output={};var f=d.url,param=d.param,pageStyle=d.pageStyle,pageList=d.pageList,pageCount=d.pageCount?d.pageCount:20,total=400,pageTotal=20,pageIndex=1,createPage;switch(pageStyle){case"page-center":createPage=function(){pageCenter()};break;case"page-right":createPage=function(){pageRight()};break}indexPage(1);function getData(b){var c=param;c.pageIndex=b;$.ajax({type:"get",url:f,data:c,success:function(a){jsonData=eval(a);pageList(jsonData)}})}function nextPage(){if(pageIndex>=pageTotal){pageIndex=pageTotal}else{pageIndex++}getData(pageIndex);createPage()}function prevPage(){if(pageIndex<=1){pageIndex=1}else{pageIndex--}getData(pageIndex);createPage()}function indexPage(a){pageIndex=a>0?a:1;pageIndex=pageIndex<pageTotal?a:pageTotal;getData(pageIndex);createPage()}function pageCenter(){if(pageTotal<=0){$(e).html("");return}var a='',flag;flag=pageIndex==1?" disable":"";a+='<span class="page-first'+flag+'">首页</span>';a+='<span class="page-prev'+flag+'">上一页</span>';if(pageTotal<=10){for(var i=1;i<=pageTotal;i++){flag=pageIndex==i?" active":"";a+='<span class="page-num'+flag+'">'+i+'</span>'}}else{for(var i=1;i<=10;i++){var p=pageIndex<7?i:pageIndex>=(pageTotal-3)?(pageTotal+i-10):(pageIndex+i-7);flag=pageIndex==p?" active":"";a+='<span class="page-num'+flag+'">'+p+'</span>'}}flag=pageIndex==pageTotal?" disable":"";a+='<span class="page-next'+flag+'">下一页</span>';a+='<span class="page-last'+flag+'">尾页</span>';$(e).html('<div class="page-container"><div class="page-center">'+a+'</div></div>');$(e).find(".page-first").on("click",function(){if($(this).hasClass("disable")){return}indexPage(1)});$(e).find(".page-prev").on("click",function(){if($(this).hasClass("disable")){return}prevPage()});$(e).find(".page-num").on("click",function(){if($(this).hasClass("active")){return}indexPage(parseInt($(this).text()))});$(e).find(".page-next").on("click",function(){if($(this).hasClass("disable")){return}nextPage()});$(e).find(".page-last").on("click",function(){if($(this).hasClass("disable")){return}indexPage(pageTotal)})}function pageRight(){if(pageTotal<=0){$(e).html("");return}var a=(pageIndex-1)*pageCount+1;var b=(pageIndex*pageCount)>total?total:(pageIndex*pageCount);var c="";if(pageIndex==1&&pageTotal==1){c='&nbsp;'+a+'-'+b+'条，共'+total+'条&nbsp;'}if(pageIndex==1){c='&nbsp;'+a+'-'+b+'条，共'+total+'条&nbsp;<span class="page-next">下一页&gt;</span><span class="page-last">&nbsp;&nbsp;尾页&gt;&gt;</span>'}if(pageIndex>1){if(pageIndex<pageTotal){c='<span class="page-first">&lt;&lt;首页&nbsp;&nbsp;</span><span class="page-prev">&lt;上一页</span>&nbsp;'+a+'-'+b+'条，共'+total+'条&nbsp;<span class="page-next">下一页&gt;</span><span class="page-last">&nbsp;&nbsp;尾页&gt;&gt;</span>'}else{c='<span class="page-first">&lt;&lt;首页&nbsp;&nbsp;</span><span class="page-prev">&lt;上一页</span>&nbsp;'+a+'-'+b+'条，共'+total+'条&nbsp;'}}$(e).html('<div class="page-container"><div class="page-right">'+c+'</div></div>');$(e).find(".page-first").on("click",function(){indexPage(1)});$(e).find(".page-prev").on("click",function(){prevPage()});$(e).find(".page-next").on("click",function(){nextPage()});$(e).find(".page-last").on("click",function(){indexPage(pageTotal)})}}});
