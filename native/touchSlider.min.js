var touchSlider=function(f){var g=document.querySelector(f.id),hw=f.hw;ul=g.querySelector('.imgs'),lis=ul.querySelectorAll('li');len=lis.length;var h='';for(var i=0;i<len;i++){h+='<li></li>'}var j=document.createElement('ul');j.className='dots';j.innerHTML=h;g.appendChild(j);var k=j.querySelectorAll('li');var l=0;k[l].className='active';ul.appendChild(lis[0].cloneNode(true));lis=ul.querySelectorAll('li');len=lis.length;var m,height;resize();window.onresize=function(){resize()};function resize(){m=g.offsetWidth;height=m*2/3;if(hw){height=m*hw}g.style.height=height+'px';ul.style.width=m*len+'px';for(var i=0;i<len;i++){lis[i].style.width=m+'px'}}var n;autoPlay();function autoPlay(){if(n){clearTimeout(n)};n=setTimeout(function(){l++;move(-1);autoPlay()},3000)}var o=0,mx=0,movingFlag=false;g.addEventListener('touchstart',function(a){if(n){clearTimeout(n)};o=a.targetTouches[0].pageX},false);g.addEventListener('touchmove',function(a){a.preventDefault()},false);g.addEventListener('touchend',function(a){mx=a.changedTouches[0].pageX-o;if(mx<-30){if(movingFlag){return}l++;move(-1)}else if(mx>30){if(movingFlag){return}l--;move(1)}autoPlay()},false);function move(c){movingFlag=true;if(l>=len){ul.style.left='0px';l=1}if(l<0){ul.style.left=-m*(len-1)+'px';l=len-2}var d=-m*l;var e=function(){var a=ul.offsetLeft;var b=(d-a)/8;b=b>0?Math.ceil(b):Math.floor(b);if((c<0&&a>d)||(c>0&&a<d)){ul.style.left=a+b+'px';setTimeout(e,10)}else{movingFlag=false}}e();showdots()}function showdots(){for(var i=0;i<len-1;i++){if(k[i].className=='active'){k[i].className='';break}}k[l>=len-1?0:l].className='active'}}
