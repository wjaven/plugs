(function(){var m=function(k){var l=document.querySelector(k).querySelectorAll('.card-container'),closeBtn=document.querySelector('.card-closebtn'),activeObj={};for(var i=0;i<l.length;i++){l[i].addEventListener('click',function(){if(activeObj.elem){return}var c=this.querySelector('circle');activeObj.elem=this;activeObj.circle=c;siblingsHidden(l,activeObj.elem,1,0);var d=function(a){var b=getPosition(a),windowW=window.innerWidth,windowH=window.innerHeight>500?500:window.innerHeight;activeObj.fromWidth=a.offsetWidth;activeObj.fromHeight=a.offsetHeight;activeObj.fromLeft=b.left;activeObj.fromTop=b.top;activeObj.toLeft=parseInt(windowW/2-activeObj.fromWidth/2);activeObj.toTop=parseInt(windowH/2-activeObj.fromHeight/2);a.style.position='fixed';a.style.width=activeObj.fromWidth+'px';a.style.height=activeObj.fromHeight+'px';a.style.left=activeObj.fromLeft+'px';a.style.top=activeObj.fromTop+'px';move(a,{left:activeObj.toLeft,top:activeObj.toTop},function(){a.setAttribute('style','');a.className='card-container';scaleCircle(c,992,function(){closeBtn.style.visibility='visible';move(closeBtn,{opacity:100})})})};scaleCircle(c,60,function(){d(activeObj.elem)})},false)}closeBtn.addEventListener('click',function(){if(!activeObj.elem){return}move(closeBtn,{opacity:0},function(){closeBtn.style.visibility='hidden'});scaleCircle(activeObj.circle,60,function(){var a=window.innerHeight>500?500:window.innerHeight;activeObj.elem.style.width=activeObj.fromWidth+'px';activeObj.elem.style.height=activeObj.fromHeight+'px';activeObj.elem.style.left=activeObj.toLeft+'px';activeObj.elem.style.top=parseInt(a/2-activeObj.fromHeight/2)+'px';move(activeObj.elem,{left:activeObj.fromLeft,top:activeObj.fromTop},function(){activeObj.elem.setAttribute('style','');activeObj.elem.className='card-container card-container-close';siblingsHidden(l,activeObj.elem,0,100);scaleCircle(activeObj.circle,992,function(){activeObj={}})})})},false);function siblingsHidden(a,b,c,d){for(var j=0;j<a.length;j++){if(a[j]==b){continue}a[j].style.opacity=c;var e=a[j];move(a[j],{opacity:d},(function(){e.style.visibility=d==0?'hidden':'visible'})(e))}}function scaleCircle(c,d,e){var f=function(){var a=parseInt(c.getAttribute('r'));var b=(d-a)/14;b=b>0?Math.ceil(b):Math.floor(b);if(a==d){if(e){e()}}else{c.setAttribute('r',a+b);setTimeout(f,10)}};f()}function move(e,f,g){var h=function(){var a=true;for(var b in f){var c=0;if(b=='opacity'){c=e.style[b]*100}else{c=parseInt(e.style[b])}var d=(f[b]-c)/14;d=d>0?Math.ceil(d):Math.floor(d);if(c!=f[b]){a=false}if(b=='opacity'){e.style[b]=(c+d)/100}else{e.style[b]=c+d+'px'}}if(a){if(g){g()}}else{setTimeout(h,10)}};h()}function getPosition(a){var b=a.offsetLeft,actualTop=a.offsetTop,current=a.offsetParent;while(current!==null){b+=current.offsetLeft;actualTop+=current.offsetTop;current=current.offsetParent}return{left:b,top:actualTop}}};window.cardClipCircle=m})(window);
