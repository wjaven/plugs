(function(){var g=[],d=false,f,e;var i=function(D){var H=new Date(),Q=[],u=[];Q[0]=H.getFullYear();Q[1]=H.getMonth()+1;Q[2]=H.getDate();u=Q.concat();if(g[D.id]){g[D.id].param=D}else{g[D.id]={param:D}}var R=function(X){X&&X.stopPropagation?X.stopPropagation():X.cancelBubble=true;var U=X.target||X.srcElement;f=U.id;var W=c(U);var V=h(U)+U.offsetHeight;var m=document.querySelector(".calendarBox");m.style.left=W+"px";m.style.top=V+"px";m.style.display="block";q(Q[0],Q[1])};for(var T in g){if(g[T].bind){continue}b(document.getElementById(T),"click",R);g[T].bind=true}if(d){return}var y=["日","一","二","三","四","五","六"];var t=document.createElement("div"),p=document.createElement("div"),z=document.createElement("div"),E=document.createElement("div");t.className=e?"calendarBox "+e:"calendarBox";p.className="cbtn";z.className="chead";E.className="cbody";document.querySelector("body").appendChild(t);b(document,"click",function(){document.querySelector(".calendarBox").style.display="none";var m=document.querySelector(".calendarBox").querySelectorAll(".cmore");m[0].style.display="none";m[1].style.display="none";u=Q.concat()});t.onselectstart=function(){return false};var B='<div><div class="c-icon"><i class="c-left"></i></div>'+'<div class="cyear"></div><div class="c-icon"><i class="c-right"></i></div>'+'<div class="cmore"><div class="cm-icon"><i class="c-up"></i></div>'+'<ul></ul><div class="cm-icon"><i class="c-down"></i></div></div></div>',P='<div><div class="c-icon"><i class="c-left"></i></div>'+'<div class="cmonth"></div><div class="c-icon"><i class="c-right"></i></div>'+'<div class="cmore"><ul></ul></div></div>';p.innerHTML=B+P;t.appendChild(p);var M=p.childNodes[0].querySelectorAll("div"),G=M[1],F=M[0],I=M[2],w=p.childNodes[0].querySelector(".cmore"),C=w.querySelector("ul"),n=w.querySelectorAll("div")[0],o=w.querySelectorAll("div")[1];s(Q[0]-4);n.onclick=function(){var m=parseInt(C.querySelector("li").innerText||C.querySelector("li").textContent);s(m-9)};o.onclick=function(){var m=parseInt(C.querySelector("li").innerText||C.querySelector("li").textContent);s(m+7)};F.onclick=function(){u[0]=u[0]-1;q(u[0],u[1])};I.onclick=function(){u[0]=u[0]+1;q(u[0],u[1])};function s(X){var U="";for(var V=X;V<X+8;V++){var Y=V+1;if(Y==Q[0]){U+='<li class="ctoday">'+Y+"</li>"}else{U+="<li>"+Y+"</li>"}}C.innerHTML=U;var W=C.querySelectorAll("li");for(var V=0,m=W.length;V<m;V++){W[V].onclick=function(){u[0]=parseInt(this.innerText||this.textContent);q(u[0],u[1]);w.style.display="none"}}}var r=p.childNodes[1].querySelectorAll("div"),S=r[1],k=r[0],l=r[2],L=p.childNodes[1].querySelector(".cmore"),A=L.querySelector("ul"),J="";S.className="cmonth";for(var N=0;N<12;N++){var K=N+1;if(K==Q[1]){J+='<li class="ctoday" data="'+K+'">'+K+"</li>"}else{J+='<li data="'+K+'">'+K+"</li>"}}A.innerHTML=J;k.onclick=function(){u[1]=u[1]-1;if(u[1]<1){u[1]=12;u[0]=u[0]-1}q(u[0],u[1])};l.onclick=function(){u[1]=u[1]+1;if(u[1]>12){u[1]=1;u[0]=u[0]+1}q(u[0],u[1])};G.onclick=function(){w.style.display="block";L.style.display="none"};S.onclick=function(){L.style.display="block";w.style.display="none"};var x=A.querySelectorAll("li");for(var N=0,O=x.length;N<O;N++){x[N].onclick=function(){u[1]=parseInt(this.innerText||this.textContent);q(u[0],u[1]);L.style.display="none"}}var v="";for(var N=0;N<7;N++){v+='<div class="cth">'+y[N]+"</div>"}z.innerHTML=v;t.appendChild(z);t.appendChild(E);q(Q[0],Q[1],{min:"2016-09-01",max:"2016-09-20"});d=true;b(t,"click",function(m){m&&m.stopPropagation?m.stopPropagation():m.cancelBubble=true});function q(af,an){var X=document.querySelector(".calendarBox");if(X.innerText){X.querySelector(".cyear").innerText=af;X.querySelector(".cmonth").innerText=an}else{X.querySelector(".cyear").textContent=af;X.querySelector(".cmonth").textContent=an}var ac=g[f]?g[f].param:null,ah=ac&&ac.min?new Date(a(ac.min)):null,aj=ac&&ac.max?new Date(a(ac.max)):null;weekFirst=new Date(af,an-1,1).getDay();var ao=af,ai=an;if(ai>11){ao=ao+1;ai=0}var ab=new Date(new Date(ao,ai,1)-3600000*24),aa=ab.getDate(),ad=ab.getDay(),W=weekFirst+aa+(6-ad);var ae="";for(var ak=0;ak<W;ak++){if(ak%7==0){ae+='<div class="ctr">'}if(ak<weekFirst||ak>=(weekFirst+aa)){ae+='<div class="ctd cdisable">&nbsp;</div>'}else{var m=an<10?("0"+an):an,Z=ak-weekFirst+1,Y=Z<10?("0"+Z):Z,ap=af+"-"+m+"-"+Y,V="ctd";var U=new Date(a(ap));if(ah&&U<ah||aj&&U>aj){V+=" cdisable"}if(Z==Q[2]&&an==Q[1]&&af==Q[0]){V+=" ctoday"}ae+='<div class="'+V+'" data="'+ap+'">'+Z+"</div>"}if(ak%7==6){ae+="</div>"}}var ag=X.querySelector(".cbody");ag.innerHTML=ae;var am=ag.querySelectorAll(".ctd");for(var ak=0,al=am.length;ak<al;ak++){b(am[ak],"click",function(ar){var aq=ar.target||ar.srcElement;if(aq.className.indexOf("cdisable")>-1){return}var au=document.getElementById(f);if(au.value==undefined){au.innerHTML=aq.getAttribute("data")}else{au.value=aq.getAttribute("data")}document.querySelector(".calendarBox").style.display="none";var at=document.querySelector(".calendarBox").querySelectorAll(".cmore");at[0].style.display="none";
at[1].style.display="none";u=Q.concat();if(g[f]&&g[f].param.callback){g[f].param.callback(aq.getAttribute("data"))}})}}};i.cskin=function(k){e=k};function b(m,k,l){if(m.addEventListener){m.addEventListener(k,l,false)}else{m.attachEvent("on"+k,l)}}function j(m,k,l){if(m.removeEventListener){m.removeEventListener(k,l,false)}else{m.detachEvent("on"+k,l)}}function c(k){var l=k.offsetLeft;var m=k.offsetParent;while(m!==null){l+=m.offsetLeft;m=m.offsetParent}return l}function h(k){var l=k.offsetTop;var m=k.offsetParent;while(m!==null){l+=m.offsetTop;m=m.offsetParent}return l}function a(k){return k.replace(/-/g,"/")}window.wcalendar=i})();
